{
  "elements": [
    { "type": "Label", "label": "--- Operating Mode ---" },
    {
      "type": "Select",
      "name": "OperatingMode",
      "caption": "Operating Mode",
      "options": [
        { "label": "Cooling", "value": 0 },
        { "label": "Heating", "value": 1 },
        { "label": "Auto/Cooperative", "value": 2 }
      ],
      "value": 2
    },

    { "type": "Label", "label": "--- Core Module Links ---" },
    { "type": "SelectVariable", "name": "ACActiveLink", "caption": "AC Active Link" },


    { "type": "Label", "label": "--- Learning / Exploration ---" },
    { "type": "NumberSpinner", "name": "EpsilonStart", "caption": "Epsilon start", "digits": 3, "minimum": 0.0, "maximum": 1.0, "value": 0.40 },
    { "type": "NumberSpinner", "name": "EpsilonMin", "caption": "Epsilon min", "digits": 3, "minimum": 0.0, "maximum": 1.0, "value": 0.05 },
    { "type": "NumberSpinner", "name": "EpsilonDecay", "caption": "Epsilon decay (per step)", "digits": 5, "minimum": 0.90000, "maximum": 0.99999, "value": 0.995 },

    { "type": "Label", "label": "--- Reward Weights ---" },
    { "type": "NumberSpinner", "name": "W_Comfort", "caption": "Comfort weight (ΔT)", "digits": 2, "minimum": 0.0, "maximum": 10.0, "value": 1.0 },
    { "type": "NumberSpinner", "name": "W_Energy", "caption": "Energy weight per % (p+f)", "digits": 4, "minimum": 0.0, "maximum": 0.1, "value": 0.01 },
    { "type": "NumberSpinner", "name": "W_ChangePenalty", "caption": "Change penalty weight per % step", "digits": 4, "minimum": 0.0, "maximum": 0.1, "value": 0.002 },
    { "type": "NumberSpinner", "name": "W_Progress", "caption": "Progress weight (WAD improvement)", "digits": 2, "minimum": 0.0, "maximum": 50.0, "value": 10.0 },
    { "type": "NumberSpinner", "name": "W_Freeze", "caption": "Coil freeze penalty weight", "digits": 2, "minimum": 0.0, "maximum": 20.0, "value": 2.0 },
    { "type": "NumberSpinner", "name": "W_Trend", "caption": "Comfort trend weight (Δ maxΔT)", "digits": 2, "minimum": 0.0, "maximum": 20.0, "value": 2.0 },
    { "type": "NumberSpinner", "name": "TrendEps", "caption": "Trend deadband (°C)", "digits": 2, "minimum": 0.0, "maximum": 1.0, "value": 0.10 },
    { "type": "NumberSpinner", "name": "W_Window", "caption": "Window penalty weight (set 0 to disable)", "digits": 2, "minimum": 0.0, "maximum": 5.0, "value": 0.0 },

    { "type": "Label", "label": "--- Coil Safety ---" },
    { "type": "NumberSpinner", "name": "MinCoilTempLearning", "caption": "Min Coil Temp (Learning, °C)", "digits": 1, "minimum": -5.0, "maximum": 10.0, "value": 2.0 },
    { "type": "NumberSpinner", "name": "MaxCoilDropRate", "caption": "Max coil drop rate (K/min)", "digits": 2, "minimum": 0.0, "maximum": 10.0, "value": 1.5 },
    { "type": "CheckBox", "name": "AbortOnCoilFreeze", "caption": "Abort on coil freeze indicators", "value": true },

    { "type": "Label", "label": "--- ZDM Integration ---" },
    { "type": "SelectInstance", "name": "ZDM_InstanceID", "caption": "ZDM instance (for aggregates)" },

    { "type": "Label", "label": "--- System & Action Settings ---" },
    { "type": "CheckBox", "name": "ManualOverride", "caption": "Manual Override" },
    {
      "type": "Select",
      "name": "LogLevel",
      "caption": "Log Level",
      "options": [
        { "label": "Error only", "value": 0 },
        { "label": "Warnings", "value": 1 },
        { "label": "Info", "value": 2 },
        { "label": "Debug (all messages)", "value": 3 }
      ],
      "value": 3
    },
    { "type": "NumberSpinner", "name": "Alpha", "caption": "Alpha (learning rate)", "digits": 3, "minimum": 0.0, "maximum": 1.0, "value": 0.05 },
    { "type": "NumberSpinner", "name": "Gamma", "caption": "Gamma (discount factor)", "digits": 3, "minimum": 0.0, "maximum": 1.0, "value": 0.9 },
    { "type": "ValidationTextBox", "name": "CustomPowerLevels", "caption": "Custom Power Levels (%)", "value": "0,40,80,100" },
    { "type": "NumberSpinner", "name": "PowerStep", "caption": "Power Step (%)", "digits": 0, "minimum": 1, "maximum": 100, "value": 20 },
    { "type": "ValidationTextBox", "name": "CustomFanSpeeds", "caption": "Custom Fan Speeds (%)", "value": "0,40,80,100" },
    { "type": "NumberSpinner", "name": "FanStep", "caption": "Fan Step (%)", "digits": 0, "minimum": 1, "maximum": 100, "value": 20 },
    { "type": "NumberSpinner", "name": "MaxPowerDelta", "caption": "Max Power Delta (%)", "digits": 0, "minimum": 0, "maximum": 100, "value": 40 },
    { "type": "NumberSpinner", "name": "MaxFanDelta", "caption": "Max Fan Delta (%)", "digits": 0, "minimum": 0, "maximum": 100, "value": 40 },

    { "type": "Label", "label": "--- Persistence ---" },
    { "type": "ValidationTextBox", "name": "QTablePath", "caption": "Q-table file path (optional)", "info": "Leave empty to store Q-table in attributes" }
  ],
  "actions": [
    { "type": "Button", "label": "Reset Learning", "onClick": "ACIPS_ResetLearning($id);" },
    { "type": "Button", "label": "Update Visualization", "onClick": "ACIPS_UpdateVisualization($id);" }
  ],
  "status": [
    { "code": 102, "icon": "active", "caption": "Active" },
    { "code": 202, "icon": "error", "caption": "Configuration incomplete" }
  ]
}
